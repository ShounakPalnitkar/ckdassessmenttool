{% extends "base.html" %}

{% block content %}
<section class="form-section" id="result">
    <h2>Your CKD Risk Assessment Results</h2>
    
    <div id="risk-message">
        <p>Your calculated CKD risk score: <strong>{{ result.risk_score }}/20</strong></p>
        <p>Risk level: <span class="risk-{{ result.risk_level }}">{{ result.risk_level.upper() }}</span></p>
        <p>Estimated 5-year risk: {{ result.risk_percentage }}</p>
        
        <div class="progress-container">
            <div class="progress-bar" style="width: {{ (result.risk_score / 20) * 100 }}%; 
                background-color: {% if result.risk_level == 'high' %}var(--danger-color){% elif result.risk_level == 'moderate' %}var(--warning-color){% else %}var(--success-color){% endif %}">
            </div>
        </div>
    </div>
    
    <div id="risk-factors">
        <h3>Key Risk Factors</h3>
        <ul>
            {% for factor in result.factors if factor[1] > 0 %}
            <li>{{ factor[0] }} ({{ factor[1] }}/{{ factor[2] }} points)</li>
            {% endfor %}
        </ul>
    </div>
    
    <div id="recommendations">
        <h3>Recommendations</h3>
        {% for rec in result.recommendations %}
        <div class="recommendation">
            <h4>{{ rec.title }}</h4>
            {{ rec.content|safe }}
        </div>
        {% endfor %}
    </div>
    
    <div class="actions">
        <button id="download-text" class="download-btn">Download Report</button>
        <button id="reset-btn" onclick="window.location.href='{{ url_for('assessment') }}'">New Assessment</button>
    </div>
</section>
{% endblock %}
